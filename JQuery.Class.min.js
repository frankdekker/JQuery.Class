(function(){Function.prototype.bind||(Function.prototype.bind=function(){return $.proxy.apply($,[this].concat([].slice.call(arguments)))});this.Class=function(b){b=b||{};var c=function(){for(var b in this){var a=this[b];switch($.type(a)){case "object":this[b]=$.extend(!0,{},a);break;case "array":this[b]=$.extend(!0,[],a)}}return this.initialize?this.initialize.apply(this,arguments):this};c.$definition=b;a(c.prototype,b);c.prototype.parentMethod=function(){try{if(arguments.callee.caller===this.$parent)return window.console&&
console.error("This function has no parent."),!1}catch(b){}return this.$parent.apply(this,arguments)};return c};var a=function(e,c){for(var d in c)!1!==c.hasOwnProperty(d)&&void 0!==c[d]&&("Extends"===d?$.each("array"===$.type(c.Extends)?c.Extends:[c.Extends],function(){a(e,this.$definition)}):$.isFunction(e[d])&&$.isFunction(c[d])?e[d]=b(c[d],e[d]):e[d]=c[d])},b=function(b,a){return function(){var d=this.$parent;this.$parent=a;var f=b.apply(this,arguments);this.$parent=d;return f}}})();(function(){var a=function(b){return b.replace(/^on([A-Z])/,function(b,a){return a.toLowerCase()})};this.Chain=new Class({$chains:[],chain:function(b){this.$chains.push(b);return this},callChain:function(b){if(0==this.$chains.length)return this;var a=this.$chains.shift();"function"==typeof a&&a.apply(this,arguments);return this},clearChain:function(){this.$chains=[];return this}});this.Events=new Class({$events:{},on:function(b,e){b=a(b);var c=this.$events[b]||[];0>$.inArray(c,e)&&(c.push(e),this.$events[b]=
c);return this},off:function(b,e){b=a(b);var c=this.$events[b];if(c)if(void 0===e)delete this.$events[b];else{var d=$.inArray(e,c);-1!==d&&delete c[d]}return this},trigger:function(b,e){var c,d;b=a(b);c=this.$events[b];if(!c)return this;e=$.isArray(e)?e:[e];for(d=0;d<c.length;d++)c[d]&&c[d].apply(this,e);return this}});this.Options=new Class({setOptions:function(){var b=this.options=$.extend.apply(null,$.merge([!0,{},this.options],arguments));if(this.on)for(var a in b)"function"==$.type(b[a])&&/^on[A-Z]/.test(a)&&
(this.on(a,b[a]),delete b[a]);return this}})})();(function(){this.Drag=new Class({Extends:[Events,Options],element:null,options:{snap:10,preventDefault:!1,stopPropagation:!1},bound:{},mouse:{},initialize:function(a,b){this.element=a;this.setOptions(b);this.bound={start:$.proxy(this.start,this),check:$.proxy(this.check,this),drag:$.proxy(this.drag,this),cancel:$.proxy(this.cancel,this),stop:$.proxy(this.stop,this)};this.attach()},attach:function(){this.element.on("touchstart mousedown",this.bound.start);return this},detach:function(){this.element.off("touchstart mousedown",
this.bound.start);return this},start:function(a){var b="mousedown"===a.type,e="touchstart"===a.type;(!0===this.options.preventDefault||b&&"mouse"===this.options.preventDefault||e&&"touch"===this.options.preventDefault)&&a.preventDefault();(!0===this.options.stopPropagation||b&&"mouse"===this.options.stopPropagation||e&&"touch"===this.options.stopPropagation)&&a.stopPropagation();b=this.getPoint(a);this.mouse.start=b;this.trigger("beforeStart",[this.element,b,a]);$(document).on("mousemove touchmove",
this.bound.check).on("mouseup touchend touchcancel",this.bound.cancel)},check:function(a){var b=this.getPoint(a);Math.round(Math.sqrt(Math.pow(b.x-this.mouse.start.x,2)+Math.pow(b.y-this.mouse.start.y,2)))<=this.options.snap||($(document).off("mousemove touchmove",this.bound.check).off("mouseup touchend touchcancel",this.bound.cancel).on("mousemove touchmove",this.bound.drag).on("mouseup touchend touchcancel",this.bound.stop),this.trigger("start",[this.element,b,a]))},drag:function(a){this.trigger("drag",
[this.element,this.getPoint(a),this.mouse.start,a])},cancel:function(a){$(document).off("mousemove touchmove",this.bound.check).off("mouseup touchend touchcancel",this.bound.cancel);this.trigger("cancel",[this.element,this.getPoint(a),this.mouse.start,a])},stop:function(a){$(document).off("mousemove touchmove",this.bound.drag).off("mouseup touchend touchcancel",this.bound.stop);this.trigger("complete",[this.element,this.getPoint(a),this.mouse.start,a])},getPoint:function(a){return a.originalEvent&&
a.originalEvent.touches&&0<a.originalEvent.touches.length?{x:a.originalEvent.touches[0].pageX,y:a.originalEvent.touches[0].pageY}:a&&a.pageX&&a.pageY?{x:a.pageX,y:a.pageY}:{x:-1,y:-1}}})})();
